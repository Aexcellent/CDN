铁路信息化

铁 道 运 输 与 经 济 RAILWAY TRANSPORT AND ECONOMY

文章编号：1003-1421(2020)11-0080-06     中图分类号：U29-39     文献标识码：A DOI：10.16668/j.cnki.issn.1003-1421.2020.11.14

基于区块链技术的铁路数据汇集
共享体系架构研究
Architecture of the Railway Data Collection and Sharing System Based on Blockchain
代明睿
DAI Mingrui
（中国铁道科学研究院集团有限公司 电子计算技术研究所，北京  100081)
(Institute of Computing Technologies, China Academy of Railway Sciences Corporation Limited, Beijing 100081, China)
摘  要：伴随铁路智能化建设 ，我国铁路已经面向建造 、装备 、运营等板块相关 应用系统进行全业务 、全类型的数据汇集 ，其中敏感数据信息的隐私保护和安全 可控需要重点关注 。从铁路数据汇集共享现状出发 ，分析基于区块链技术的铁路 数据汇集共享 ，设计基于区块链技术的铁路数据汇集共享体系架构 ，研究基于区 块链的铁路数据汇集共享关键技术 ，即基于区块链的铁路数据汇集技术 、数据审 计技术 、数据检索技术和数据共享技术 ，分析铁路数据汇集共享体系架构安全特 性 。研究能够同时兼顾数据全面汇集和数据拥有方自主可控的需求 。 关键词：铁路；区块链；星际文件系统；铁路数据汇集；共享体系；架构；数据汇 集；数据审计；数据检索；安全性
Abstract: With the construction of intelligent railway in China, data collection covers all business and all types from application systems related to construction, equipment and operation. More attention should be paid to privacy protection and security of sensitive data and information. After analyzing the current situation of railway data collection and sharing, this paper proposes a railway data collection and sharing system, combining blockchain technology, studies the key technologies of railway data collection and sharing, namely railway data collection, data audit, data retrieval and data sharing technology based on blockchain, , and analyzed the security and characteristics of railway data collection and sharing system. This research has simultaneously taken into account the comprehensive data collection and independently controllable needs of the data owner. Keywords: Railway; Blockchain, IPFS, Railway Data Collection; Sharing System; Architecture; Data Collection; Data Audit; Data Retrieval; Security
80
第42卷 第11期

基于区块链技术的铁路数据汇集共享体系架构研究  代明睿

铁路信息化
铁道运输与经济

点的分布式版本文件系统 ，基于分布式哈希表解决
1  基于区块链技术的铁路数据汇集共享体系 数据的传输 、定位和存储问题 ，数据保存到星际

1.1  基于区块链技术的铁路数据汇集共享

文件系统节点后 ，系统将返回基于该信息计算得出

铁路数据汇集共享是将铁路在运输生产和经营 的唯一哈希值 。哈希值与数据内容一一对应保证信

活动中产生和积累的海量数据进行汇集存储并在各 息不被篡改 。区块链与星际文件系统的特点相结

业务间进行共享利用的过程 。数据汇集共享是围绕 合 [3-6]，提供了解决铁路数据汇集面临各类问题的

铁路运输生产、建设管理、经营开发战略决策等 可能。因此，以区块链技术为基础，针对铁路数

领域开展铁路数据综合分析的必要条件 ，有利于 据共享的业务特点提出一种安全 、高效的数据汇集

发掘和释放数据资源的潜在价值，发挥数据在提 共享体系架构，研究其中的关键技术问题。业务

高效率 、提升效益 、确保安全 、优化服务等方面 信息系统可以在不泄露数据明文的情况下完成数据

的独特作用，提升铁路管理水平和服务质量，增 汇集，将索引信息上链存储，数据的使用需要得

强安全风险防控能力 ，实现铁路运营和管理的精准 到业务方的授权和管控 ，多重加密保证数据真实安

性 、高效性 、预见性 。目前 ，遵循数据“一点采 全 ，共识机制保证数据存管用全程留痕 。该架构

集 、全程应用”的原则 ，铁路主要信息系统业务数 可以实现数据全面汇集和数据自主可控的结合 。

据向数据中心的汇集工作已经展开 。数据中心的铁 1.2  基于区块链技术的铁路数据汇集共享体系架构

路数据汇集以铁路基础数据管理和数据整合共享为

结合现阶段铁路数据汇集共享的实际需求 ，基

抓手 ，能够盘活铁路数据资产 ，充分挖掘铁路数 于区块链技术的特征与优势 ，设计基于区块链技术

据价值 ，有效支撑铁路各专业开展数据分析 、成 的铁路数据汇集共享体系架构 。基于区块链技术的

果共享和产品研发 ，有力推动铁路信息系统的互联 铁路数据汇集共享体系架构如图 1 所示 。

互通 、数据共享和深度集成 。

由图 1 可知 ，基于区块链技术的铁路数据汇集

区块链是分布式数据存储、点对点传输、共 共享体系架构主要包含数据存储层、区块层、合

识机制 、加密算法等计算机技术的新型应用模式 ， 约层 、汇集共享应用层和服务层 5 部分 。

其本质是一个分布式公共账本 ，区块链系统中的参

（1）数据存储层。区块链并不适用于存储大规

与者可以共同维护账本 ，但单一用户不可以对它进 模数据，这不仅会造成内容过度占用，而且在同步

行控制 。数据的完整 、完全与访问控制管理是数 共识过程中也会浪费大量网络资源与计算资源。因

据存储与共享中的关键问题 ，目前铁路数据汇集采 此，按链上索引存储和链下数据存储 2 部分设计存

用传统集中存储方式实现 ，这也带来了多方面的问 储架构。链上存储用户信息、元数据信息及数据索

题 。第一 ，集中存储 、管理铁路领域海量业务数 引信息。区块由区块头和区块体构成，区块头里存

据将面临多方面的安全风险 ，网络攻击时可能导致 储上一个区块的哈希值、本区块体的哈希值及时间

数据泄露 ，因而如何保证数据安全是需要考虑的关 戳等信息；区块体中存储用户、元数据及索引的加

键问题 。第二 ，传统数据中心的存储管理机制导 密信息，并通过区块间的连接进行区块的同步。对

致汇集后数据的提供者失去对数据的自主控制权 ， 其他的业务数据，如客货运输部分数据，将其加密

这种数据的不可控性既带来了安全隐患 ，也增加了 存储于 IPFS 中，称之为业务数据的链下存储。

核心敏感数据汇集的难度 。第三 ，传统中心化架

（2） 区 块 层。 区 块 层 为 铁 路 数 据 汇 集 共 享 体

构的访问控制管理权限划分粒度低 ，难以实现对数 系提供区块链核心技术功能，依托区块链技术提供

据共享的精细管控 ，虽然针对这类问题近年来提出 多节点的身份认证和管理，在数据汇集共享应用场

了一些解决方案 ，但技术复杂且实现成本较高 。 景中建立底层的交互协议。其中既包括各类共识算

区块链作为一种新兴技术 ，具有去中心化 、 法、隐私权限策略、网络通讯策略，也包括数字签

难以篡改 、共识信任等特点 ，被广泛用于金融 、 名、多重加密、非对称加密等贯穿铁路数据汇集共 物流等领域 [1-2] 。星际文件系统 (IPFS) 是一个点对 享中各环节的关键技术。

81
第42卷 第11期

铁路信息化

铁道运输与经济

基于区块链技术的铁路数据汇集共享体系架构研究  代明睿

服务层

数据业务方

数据管理方

数据使用方

③数据检索。数据检索可以 在使用汇集数据前检索数据

汇集 共享 应用层

数据汇集
数哈数 据希据 切索上 片引链

数据审计
数数审 据据计 承挑结 诺战果

数据检索
多授检 重权索 签申授 名请权

数据共享
数数共 据据享 属范授 性围权

的粒度、属性和范围，分析 数据是否满足业务需求。用 户对数据审计信息和数据查 询发起授权申请，授权通过 后授权信息将被记入区块链

合约层

搜索合约

授权合约

审计合约

共享合约

全网广播，具体授权过程将 通过授权合约完成，多重签

名被引入授权以保证数据安

区块层

共识算法

隐私权限

数字签名

非对称加密

多重加密

全。④数据共享。在数据共

享中，用户可以针对特定的

链上存储

链下存储

数据

存储层

索引信息 元数据信息 用户信息

客运数据 货运数据

…

属性、范围发起数据共享申 请，数据汇集方和管理方进 行申请审批并将授权信息写

图 1  基于区块链技术的铁路数据汇集共享体系架构 Fig.1  Railway data collection and sharing architecture based on blockchain

入共享合约，用户根据授权 信息在 IPFS 获得共享数据， 共享权限可以被随时收回以

（3）合约层。合约层集成铁路数据汇集共享的 保证汇集方对业务数据的完全掌控。

各类智能合约 [7]，建立可监管、可审计的合约形式

（5）服务层。服务层中包括数据汇集共享体系

化规范。铁路数据汇集共享体系架构的合约层主要 中服务的 3 类用户，即数据业务方、数据管理方、

包括检索合约、授权合约、审计合约与共享合约。 数据使用方。①数据业务方。在铁路数据业务中，

其中，审计合约在数据完整性审计过程中执行数据 通常包含专业信息系统的建设运维单位及业务主管

挑战确保数据的完整性；授权合约用来将数据部分 部门 2 类角色，前者从技术层面进行数据的运营维

特征如元数据信息、审计信息等授权给特定用户； 护，后者对数据的使用及共享进行审批管理。为了

检索合约在数据检索过程中判断用户是否具备检索 业务流程的简化，将这 2 类角色合并为数据业务方

权限，对于有权限的用户从区块链账本中检索；共 一个实体，数据业务方在本方案中既完成数据汇

享合约在数据共享过程中判断用户是否具备共享 集，也作为数据管理者决定数据的查询共享范围。

权限。

②数据管理方。数据管理方对汇集的数据进行整体

（4）汇集共享应用层。汇集共享应用层包括 管理，包括对数据业务方汇集的数据进行完整性审

了铁路数据汇集共享中数据汇集、数据审计、数据 计，同时参与数据查询共享申请的审批。③数据使

检索和数据共享 4 项关键应用。①数据汇集。在 用方。数据使用者是需要数据的铁路其他业务部

数据汇集中，数据汇集方对汇集数据进行合理切 门，数据使用者在获得数据业务方和数据管理方的

片，将数据切片、元数据信息、数据摘要信息等存 同意后，通过重建哈希的方式与区块链节点交互以

入 IPFS，并将 IPFS 返回的哈希索引存储在区块链 证明其凭证，从 IPFS 节点获取数据。

中实现数据上链。②数据审计。在数据审计中将完
成对汇集数据的完整性审计，首先数据汇集方根据 2  基于区块链的铁路数据汇集共享关键技术

数据特点提出数据承诺，数据审计方根据承诺构建

铁路数据汇集共享中根据业务流程需解决数据

挑战信息组，智能合约利用挑战信息组对被审计 汇集 、数据审计 、数据检索 、数据共享 4 个环节

数据执行挑战，数据审计结果被存储于区块链中。 的技术问题 。

82
第42卷 第11期

基于区块链技术的铁路数据汇集共享体系架构研究  代明睿

铁路信息化
铁道运输与经济

2.1  铁路数据汇集技术

保证数据质量的关键 。在数据业务方将业务数据存

铁路数据汇集中的数据业务方首先对汇集数据 入 IPFS 后 ，数据管理方需要对数据的完整性进行

进行合理切片。以货票为例，通常包含时间、发 审计，传统审计方法需要将全部数据暴露，需要

到站 、运输经由 、运价里程 、货物名称等多个属 找到一种既可以保护数据隐私又可以完成数据完整

性 ，既可以按属性将数据进行横向切片 ，也可以 性审计的方法 ，引入零知识证明来解决这个问题 。

按不同的时间进行纵向切片 ，切片方式将根据数据

铁 路 汇 集 数 据 的 完 整 性 审 计 过 程 如 下： 首 先

特点及可能共享的方式决定 ，切片的粒度将影响后 数据业务方根据数据特点提出一组包含 n 组承诺的

续数据共享的权限管控粒度 。 铁路数据业务方将生成数据切片以及数据的元
数据信息及数据摘要信息存入 IPFS 中并获取 IPFS 返回的哈希 。其中数据切片用于数据共享 ，元数

承诺集 Tc = (C1，C2，…，Cn ），并提出对应的承诺 属性集 Zd*，将承诺集用数据管理方的公钥 PKg 加 密后写入区块链 ，数据管理方私钥 SKg 解密该承 诺集并审计认可后用私钥 SKg 签名并写入数据审

据信息用于数据检索 ，数据检索与共享的分离将提 计智能合约 。在数据审计时 ，数据管理方随机选

高数据安全性 。哈希被数据业务方秘钥 SKo 与数据 管理方秘钥 SKg 进行多重加密后交给其他区块链节 点 ，区块链节点收到请求首先验证数据业务方与

择 m (m < n) 个随机数 i ∈ [1，n] 和对应的承诺属性 vi ∈ Zd*，基于 (i，vi) 构造挑战信息组 ，将挑战信息 组发给智能合约 ，智能合约对被审计数据执行挑

数据管理方的签名 ，通过后执行智能合约将哈希值 战 ，得到被审计数据集的持有性证明集 Ps = (H1，

广播到其他节点执行相同的操作 ，完成数据上链 ， H2， …，Hm)， 式 中 H 为 针 对 各 属 性 的 持 有 性 证

数据管理方建立数据类别索引信息 。基于区块链的 明 。通过校验 Ps 与 Tc 完成数据审计 ，证明数据业

铁路数据汇集如图 2 所示 。

务方已完成数据汇集 。铁路数据汇集中的数据审

铁路业务 数据

将数据 存入 IPFS

I PFS

计结果被数据管理方通过私钥 SKg 签名后写入区块 链中 。基于区块链的铁路数据审计总体流程如图 3 所示 。

完成数据切片 摘要信息

数据业务方

数据汇集

I PFS

数据业务方

IPFS 返回数据 hash 信息

将 hash 信息用自身秘钥加密

提出数据 承诺
数据承诺 Tc

基于承诺构造
挑战信息 挑战信息

数据管理方

将 hash 信息 用自身秘钥
联合加密

智 能 合 约

将承诺信息

用数据管理方

通过合约上链 公钥加密

区块 0

区块 1

…

区块 N

授权智能合约

数据挑战，

获得数据

私钥

持有性证明

签名

数据管理方

审计智能合约

区块链

审计结果上链

图 2  基于区块链的铁路数据汇集 Fig.2  Railway data collection based on blockchain
2.2  铁路数据审计技术

区块 0

区块 1

…

区块链

区块 N

中国国家铁路集团有限公司 ( 以下简称“国铁

图 3  基于区块链的铁路数据审计总体流程

集团”) 提出在数据汇集中要建立数据治理机制 ， Fig.3  Overall process of railway data audit based on blockchain

制定数据标准规范 ，加强基础数据管理 。因此 ， 2.3  铁路数据检索技术

数据审计是铁路数据汇集共享中的重要环节 ，也是

铁路数据中 ，业务部门在使用其他汇集数据前

83
第42卷 第11期

铁路信息化

铁道运输与经济

基于区块链技术的铁路数据汇集共享体系架构研究  代明睿

首先需要检索数据信息 。例如 ，机务系统中某个 首先是精细化管控共享数据的属性和范围 ，如在货

部门计划开展全路机车故障的数据分析 ，需要使用 运客户分级评价和流失预警中需要获取过去特定时

汇集数据中的机车电子档案信息 ，在申请共享前应 间段中货主的发货量 、发货品类等属性信息 ，超

当先了解机车电子档案中包含哪些信息及具体信息 出范围的货主信息如个人身份信息等并不应该被共

的粒度、属性和范围，分析其是否满足机车故障 享。其次是在这个过程中，数据业务方可以随时

分析的业务需求 。

收回业务数据共享权限 ，保证对数据的完全掌控 。

将数据检索与数据共享分离开 ，目的在于规范

数据使用方完成业务数据检索后 ，可以针对数

铁路数据共享流程 、保障数据安全 。数据检索被 据特定的属性或范围发起共享申请 ，与数据检索相

设计成需要数据业务方和数据管理方双方许可才能 似 ，数据使用方通过联合签名地址 Dt 发起数据共 被执行 ，这个过程中使用了区块链多重签名技术 。 享授权申请 ，数据业务方进行审核后用自己的秘钥

铁路中一个业务部门可能管理着某一领域多类数 SKot 签名授权 ，数据管理方同样需对该申请进行签

据，为了保证数据安全性，使用中一次一密的椭 名授权，区块链节点验证该双重签名后将授权信

圆曲线加密方案 [8]，数据业务方将自己的私钥 SKot 通过 PKot = SKot G 计算得到针对某类数据 t 的公钥 PKot，式中 G 为椭圆曲线的一个基点 。之后利用数 据管理方的公钥 PKg 和 PKot 共同得到数据 t 的联合 签名地址 Dt，Dt = H (PKg，PKot )，其中 H 为哈希 函数 。

息 ，包括授权的数据业务方 ID、数据使用方 ID、 授权的数据属性与范围写入数据共享合约 。区块链 节点调用数据共享合约 ，如果不满足授权条件将忽 略该次请求 ，如果满足授权条件 ，将授权属性及 范围内的数据在 IPFS 的哈希信息用数据使用方的 公钥加密后发给使用方 ，数据使用方使用自己的秘

数据使用方对具体铁路数据 t 的检索流程如 钥解密后在 IPFS 获得共享数据 。

下：首先数据使用方申请查看数据 t 审计情况 ，数 2.5 铁路数据汇集共享体系架构安全特性分析

据管理方许可后将区块链上的数据 t 审计信息授权

（1） 存 储 安 全。 首 先， 针 对 铁 路 数 据 特 点 采

给数据使用方 ，签名后发起数据授权请求 。区块 用数据链上链下存储分离的方式，链上存储元数据

链节点验证该请求 ，执行智能合约后广播该请求 ， 信息及数据索引信息，数据本体被加密后存储于链

最后将区块链上的数据 t 审计信息用数据使用方的 下分布式文件系统中，链上与链下节点的分布特点

公钥加密后发送给数据使用方 ，数据使用方用自 确保了部分节点失效不会造成整个网络的瘫痪。其

己秘钥解密后即可查看审计信息 。确认数据审计结 次，各专业数据索引信息被多重加密后存储于区块

果后 ，数据使用方通过联合签名地址 Dt 发起数据 链上，数据共享通过智能合约进行交互，未经允许 查询授权申请 ，针对这一申请 ，数据业务方和数 的获得索引数据无法查看其中的信息，这些做法提

据管理方分别用自己的秘钥 SKot 和 SKg 完成多重签 高了整体安全性，降低了数据泄露的风险。

名授权后 ，区块链节点进行该授权的有效性检查 ，

（2）防篡改。采用 IPFS 存储与区块链结合的

通过后记入区块链并进行广播 。

方 式， 所 有 的 节 点 都 保 存 完 整 的 区 块 链 数 据， 在

数据使用方在发出对数据 t 的查询请求后 ，智 PBFT 共识机制下，只要保存链上数据节点被篡改

能合约将根据授权信息和查询数据类别判断用户是 的数量不超过总节点数的 1/3，经过一轮共识后正

否具备权限 ，对于有权限的用户从区块链账本中检 确的数据将得到恢复；同时线下数据存储在 IPFS

索出数据 t 的元数据信息及数据摘要信息对应的哈 中，对象之间的链接关系通过 hash 加密被保存，

希记录 ，数据使用方根据哈希记录向 IPFS 节点发 当链下数据被篡改后也将被立刻校验检测出来，确

起请求完成数据查询 。

保存储的汇集数据难以被篡改。

2.4 铁路数据共享技术

（3）可追溯。通过数字签名的形式记录了铁路

在铁路数据共享中 ，如何实现对数据共享的 数据共享过程中汇集、审计、授权、共享等过程的

精细管控是重点 。精细管控包括 2 个方面的内容 ， 全部信息，可以在数据视角上实现铁路数据汇集中

84
第42卷 第11期

基于区块链技术的铁路数据汇集共享体系架构研究  代明睿

铁路信息化
铁道运输与经济

“谁汇集、谁授权、谁申请、谁使用”的全流程溯

590-595. 

源，规范了铁路数据汇集共享流程，形成铁路数据 [4] GAI K，CHOO K R，WU Y L，et al. Controllable and

资产汇集应用的全景视图。

Trustworthy Blockchain-based Cloud Data Management[J].

（4）权限管理。数据权限的管理不简单的依赖

Future Generation Computer Systems，2019(91)：527-535. 

于平台管理者 , 通过多重授权机制，各类业务数据 [5] 张利华，蒋腾飞，姜攀攀，等. 基于区块链的高速铁路

的管理部门可以控制自己数据的查询和共享权限，

监测数据安全存储方案[J]. 计算机工程与设计，2020，

有效掌握业务数据的使用情况。同时依托 IPFS 分

41(4)：933-938. 

布存储中对数据的横纵切分，实现对数据共享的精

ZHANG Lihua，JIANG Tengfei，JIANG Panpan，et al. 

细管控。

Secure Storage Scheme for High-Speed Railway Monitoring Data based on Blockchain[J]. Computer Engineering and

3 结束语

Design，2020，41(4)：933-938. 

[6] XIA Q，SIFAH，EMMANUEL B，et al. MeDShare：Trust铁路数据汇集共享中 ，既要汇集整合全路数
less Medical Data Sharing among Cloud Service Providers via

据资源 ，实现数据的规范存储 、管理和高效应用 ，

Blockchain[J]. IEEE Access，2017(5)：14757-14767. 

又要解决数据业务方对敏感数据的共享管控 。基于 [7] DELMOLINO K，ARNETT M，KOSBA A，et al. Step by

区块链技术的铁路数据共享架构将数据共享与存储

Step towards Creating a Safe Smart Contract：Lessons and

分离 ，既解决了大数据上链带来的低吞吐高延迟问

Insights from a Cryptocurrency Lab[C]// Proceedings of the

题 ，又从数据汇集 、数据审计 、权限管理 、数据

2016 International Conference on Financial Cryptography

共享等多个方面提出技术解决途径 。基于区块链技

and Data Security，LNCS 9604. Berlin：Springer，2016：

术的铁路数据共享架构不但可以用于铁路内部 ，还

79-94. 

可以推广应用到海铁联运 、客运延伸服务等铁路 [8] DAI M，ZHANG S，WANG H，et al. A Low Storage

与其他行业的数据共享交换之中 。未来可以引入

Room Requirement Framework for Distributed Ledger in

token 即代币 ，通过代币机制激励数据流通 。

Blockchain[J]. IEEE Access，2018(6)：22970-22975. 

参考文献： [1] 袁 勇，王飞跃. 区块链技术发展现状与展望[J]. 自动化

收稿日期：2020-07-08 基金项目：中国国家铁路集团有限公司科技研究开发计划

学报，2016，42(4)：481-494.  YUAN Yong，WANG Feiyue. Blockchain：The State of the

课题 (K2019S012) 责任编辑：张婷钰

Art and Future Trends[J]. Acta Automatica Sinica，2016，

42(4)：481-494. 

[2] 王洪业. 基于区块链技术的空铁联运售票模式研究[J]. 铁 路运输与经济，2019，38(11)： 121-124. 

声  明

WANG Hongye. A Study on Air-Rail Inter-modal Transport based on Block Chain Technology[J]. Railway Transport and Economy，2019，38(11)：121-124.  [3] 杨 明，丁 龙，许 艳. 基于区块链的医疗数据云存 储共享方案[J]. 南京信息工程大学学报 (自然科学版)， 2019，11(5)：590-595.  YANG Ming ，DING Long，XU Yan. A Cloud Storage and Sharing Scheme for Medical Data based on Blockchain[J]. 

为扩大本刊及作者知识信息交流渠道， 加强知识信息推广力度 ，本刊已许可中国学 术期刊 ( 光盘版 ) 电子杂志社在 CNKI 中国知网 及其系列数据库产品中 ，以数字化方式复制 、 汇编 、发行 、信息网络传播本刊全文 ，凡作 者向本刊提交文章发表即视为同意编辑部上述 声明 ，由编辑部一次性给付作者文章著作权使

Journal of Nanjing University of Information Science and

用费与稿酬 。

本刊编辑部

Technology (Natural Science Edition)，2019，11(5)：

85
第42卷 第11期

