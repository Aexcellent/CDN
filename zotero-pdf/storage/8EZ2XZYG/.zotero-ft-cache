Page 1 of 25

Journal of the American Medical Informatics Association

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

4

5

6

7

8 9

Automated Production of Research Data Marts from a Canonical Fast Healthcare

10

Interoperability Resource (FHIR) Data Repository: Applications to COVID-19

11

Research

12

13

14

Leslie A Lenert 1,2, Andrey V. Ilatovskiy1,2, James Agnew3, Patricia Rudsill1,2, Jeff

15

Jacobs2, Duncan Weatherston3 and Kenneth Deans2

16

17

18

1Biomedical Informatics Center, Medical University of South Carolina, Charleston, SC,

19

USA

20 21

2Health Sciences South Carolina, Columbia, SC, USA

22

3Smile CDR, Toronto, CN

23

24

25

26

For inquiries contact:

27

28

Leslie A. Lenert MD, MS, FACP, FACMI

29

30

Assistant Provost for Data Science and Informatics

31

Medical University of South Carolina

32

22 West Edge Suite 13

33

34

Charleston, SC 29425

35

Email: Leslie.Lenert@gmail.com

36

Telephone: 843-792-4268

37

38

39

40

41

42

43

44

45

46

47

48

49

50

51 52

© The Author(s) 2021. Published by Oxford University Press on behalf of the American Medical Informatics Association. This is an Open Access article distributed under the terms of the Creative Commons Attribution Non-Commercial License

53

(http://creativecommons.org/licenses/by-nc/4.0/), which permits non-commercial re-use, distribution, and reproduction in any

54

medium, provided the original work is properly cited. For commercial re-use, please contact journals.permissions@oup.com

55

56

57

58

59

60

Journal of the American Medical Informatics Association

Page 2 of 25

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

Abstract

4

5

6

Objective: The rapidly evolving COVID-19 pandemic has created a need for timely data

7

from the healthcare systems for research. To meet this need, several large new data

8 9

consortia have developed that require frequent updating and sharing of electronic health

10

record (EHR) data in different common data models (CDMs) to create multi-institutional

11

databases for research. Traditionally, each CDM has had a custom pipeline for extract,

12 13

transform and load operations for production and incremental updates of data feeds to

14

the networks from raw EHR data. However, the demands of COVID-19 research for

15

timely data are far higher, and the requirements for updating faster than previous

16 17

collaborative research using national data networks. New approaches need to be

18

developed to address these demands.

19

20 21

Methods: In this paper, we describe the use of the Fast Healthcare Interoperability

22

Resource (FHIR) data model as a canonical data model and the automated

23

transformation of clinical data to the Patient-Centered Outcomes Research Network

24 25

(PCORnet) and Observational Medical Outcomes Partnership (OMOP) CDMs for data

26

sharing and research collaboration on COVID-19.

27

28

Results: FHIR data resources could be transformed to operational PCORnet and OMOP

29

30

CDMs with minimal production delays through a combination of real-time and post-

31

processing steps, leveraging the FHIR data subscription feature.

32

33

34

Conclusions:The approach leverages evolving standards for the availability of EHR data

35

developed to facilitate data exchange under the 21st Century Cures Act and could

36

greatly enhance the availability of standardized datasets for research.

37

38

39

40

41

42

43

44

45

46

47

48

49

50

51

52

53

54

55

56

57

58

59

60

https://mc.manuscriptcentral.com/jamia

Page 3 of 25

Journal of the American Medical Informatics Association

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

Introduction

4

5

6

The COVID-19 pandemic has illustrated the need for reliable rapidly accessible data

7

from electronic health record (EHR) systems for research on risk factors, predictive

8 9

models, and evaluation of emerging diseases. Moreover, the lack of reliable large data

10

sets has led to spurious research findings early in the COVID-19 [1]. Two of the largest

11

consortia leverage existing infrastructure for shared data collaboration. The National

12 13

COVID Collaborative Cohort (N3C) [2] is an alliance among Clinical and Translational

14

Research Grant Awardees sponsored by the National Center to Advancing

15

Translational Science (NCATS). This network leverages past experiences and

16 17

infrastructure from the Accrual to Clinical Trials Network [3]. N3C’s preferred data model

18

for accepting results is the Observational Medical Outcomes Partnership (OMOP)

19

model maintained by the Observational Health Data Sciences and Informatics (OHDSI)

20 21

collaborative [4]. However, N3C accepts data in a variety of formats. A second

22

consortium is based around the Patient-Centered Outcomes Research Network

23

(PCORnet) [5] and leverages prior investments on comparative effectiveness research

24 25

across this large research network [6] to create its database. There also are private

26

large research networks, for example, TriNetX [7], that maintain a large data network of

27

patients with COVID-19 for research from its clinical trial eligibility network [8]. The FDA

28

maintains several large networks for safety evaluation of drugs and devices that are

29

30

also being applied to problems identified during the pandemic [9]. In addition, some of

31

the same partners in N3C are also using the integrating informatics for integrating

32

biology and bedside (i2b2) platform [10] to study COVID-19. Many networks have

33

34

overlapping membership and, as a result, members have to maintain duplicative data

35

production processes.

36

37

38

As the pandemic has evolved rapidly, so have the requirements for rapid data updating

39

in these large networks. Minimizing the lag between production of the data through the

40

care of patients using an EHR system and its availability for research increases the

41 42

relevance of the network to the evolving set of problems seen with COVID-19. In the

43

prior modes of operation, MUSC’s ACT and PCORnet data networks could be used for

44

data operations with lags of three or more months for production, and cycles for new

45 46

releases of data sets every quarter. In the COVID era, the specifications for the N3C

47

network call for 2-week production cycles for data releases and one-month lags

48

between the closure of a record and its availability within the network. More current data

49 50

might be even more valuable as new variants of the virus and new therapies emerge.

51

This is a challenging task that requires the automation of processes for analytic

52

database production.

53

54

55

56

57

58

59

60

https://mc.manuscriptcentral.com/jamia

Journal of the American Medical Informatics Association

Page 4 of 25

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

Production of data for each network is, in itself, a multistep pipeline process that

4 5

involves mapping and transformation of data to the preferred data model of a research

6

network. Work for data production for different networks is often done in parallel, which

7

is logistically challenging and consumes limited resources. Sometimes work is done in

8 9

series, mapping from source data to one data model, and then another, which could

10

potentially result in a loss of data through compression or inaccuracies in mapping. In

11

this paper, we describe the use of the Fast Healthcare Interoperability Resources

12 13

(FHIR) standard data model as a canonical model for initial storage of the data for

14

subsequent transformation to more analytics-oriented models (OMOP and PCORnet) as

15

well as an architecture for multiple simultaneous largely automated translations from

16 17

FHIR to these two CDMs. This is a particularly important task as the 21st Century

18

Cures Act [11] will require availability from EHRs in FHIR standards for the United

19

States Core Data for Interoperability standards [12], which, while evolving, already has

20 21

many of the required elements for research CDMs.

22

23

Methods

24

25

26

The approach taken to standardize a data production pipeline for multiple analytic

27

CDMs from FHIR builds on one of the central tools for the FHIR paradigm: a clinical

28

data repository (CDR) designed to store, persist, retrieve, and deliver FHIR resources.

29

30

A widely used implementation for this operation is the open-source HAPI FHIR engine

31

[13]. We build our system based on the Smile CDR platform [14] that is powered by the

32

HAPI FHIR engine. This platform can accept data in a variety of formats: JSON or XML

33

34

encoded FHIR objects, HL7 v2.x messages, flat comma-delimited files, and transform

35

these data elements to FHIR resources that are stored in a proprietary relational format,

36

for efficient search and retrieval. Alternatively, some vendors persist FHIR resources

37

38

using a “data lake” approach, with extensive indexing but a minimal transformation of

39

the data [15].

40

41 42

A standards-specified feature of FHIR CDRs is automated tooling to allow subscriptions

43

to specific FHIR resources [14,16]. Subscriptions in the FHIR standard are triggers

44

attached to FHIR data resources. Creating or updating a resource triggers a function

45 46

that allows copying and transmission of the resource data object to another system. A

47

common use for subscriptions in the FHIR standard is for notification of events. For

48

example, if a patient is registered in an emergency department, a new FHIR resource

49 50

with the registration information is created, and this then triggers sending a copy of the

51

FHIR resource to another system via FHIR API with JSON payload or other

52

interoperability protocol. This results in the second computer system becoming “aware”

53 54

of the notification of registration.

55

56

57

58

59

60

https://mc.manuscriptcentral.com/jamia

Page 5 of 25

Journal of the American Medical Informatics Association

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

We adapted this feature for use in data transformation in our “Federated on FHIR (F-on-

4 5

F)” architecture [17]. F-on-F is an architecture that replaces HSSC’s legacy cross-

6

institutional integrated data repository with a series of linked FHIR data repositories with

7

a single centralized master person index maintained by subscriptions. F-on-F also uses

8 9

subscriptions to admission discharge and transfer data for ADT notification and for

10

automated updating of local repositories with centralized data on mortality, geocodes

11

and social determinants of health. A full description of F-on-F is beyond the scope of

12 13

this paper.

14

15

At the individual site level, whenever a new FHIR data resource is created in the clinical

16 17

FHIR repository, in our system, a copy of the resource is created in a second linked

18

FHIR repository using the subscription mechanism. However, rather than persisting the

19

object in the proprietary database format of the vendor, we co-develop with Smile CDR

20 21

rule-based transformations implemented in Java to persist data in two different targeted

22

analytical models, OMOP and PCORnet. This results in a system of linked CDMs

23

updated within milliseconds. The approach is illustrated in Figure 1. Both OMOP and

24 25

PCORnet models are extended to deal with identified data and data elements not

26

covered by the CDM specifications. These are kept in separate tables to preserve the

27

functioning of CDM quality inspection and analytics software; the approach also

28

preserves subject anonymity. The specific examples of FHIR Patient resource mapping

29

30

to OMOP CDM tables and extensions are illustrated in Supplemental Table S1.

31

32

The real-time transformation to analytic CDMs poses additional obstacles due to the

33

34

transactional nature of the EHR data that evolves and expands for days or even weeks

35

after a given patient encounter, while analytic data models assume a static self-

36

consistent set of data. For example, the OMOP model assumes that each patient has a

37

38

date of birth (known at least with a year precision); in the EHR data the demographics

39

details might be missing and such patients should be removed from the OMOP

40

instance. Another example, in the OMOP model both visits and associated clinical facts

41 42

have patient IDs, allowing transitivity violations that occur in the EHR data due to patient

43

merges. If data are incomplete or inconsistent at some point in time, and evolve to

44

completeness and correctness as time passes, the data in the live CDM instances are

45 46

kept in sync with the source and all updates will be propagated via pipeline. The issue is

47

minimal for study feasibility queries, however, for longitudinal data analysis these

48

inconsistencies need to be resolved. The solution we adopted was a production pipeline

49 50

with separate static OMOP and PCORnet instances for post-processing to reconcile the

51

data.

52

53 54

Another issue in design was maintaining the robustness of the process to evolutionary

55

changes in the CDMs. Ongoing changes in CDMs are the rule rather than the

56

57

58

59

60

https://mc.manuscriptcentral.com/jamia

Journal of the American Medical Informatics Association

Page 6 of 25

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

exception. The OHDSI group releases a new set of OMOP vocabularies weekly, with

4 5

changes ranging from adding a few new concepts to complete redesign of the domain

6

organization. Many other networks require frequent vocabulary updates (e.g. once a

7

month for N3C). In case of a major change, the post-processing using an Extract

8 9

Transform and Load (ETL) approach implemented via SQL was flexible enough to

10

accommodate rapid changes in vocabularies, in contrast to the Java code

11

transformations used in subscription-based mappings. Essentially, the post-processing

12 13

allows a quasi-incremental approach to the vocabulary updates: the clinical tables built

14

with the old vocabularies (within the pipeline) are combined with the fresh set of

15

vocabularies and all deviations from the new vocabularies are corrected, with the

16 17

majority of the data being untouched. This flexibility requires preserving enough

18

“rawness” of the clinical data so updates to an analytic CDM do not require a complete

19

rebuilding of the database. The drawback is that “live” versions of the database

20 21

produced through subscriptions cannot be used for complex analyses without post-

22

processing (although, again, quick study “feasibility” queries, such as counts of patients

23

with specific e-phenotypes, are possible).

24

25

26

Data security is maintained using a variety of approaches. SmileCDR supports direct

27

queries of the FHIR database using Smart-on-FHIR authentication [18]. OMOP and

28

PCORnet databases have been extended with patient data elements in separate data

29

30

tables. Databases retain their original clinical temporal labels and as such are not truly

31

de-identified data sets. Access to data is controlled by governance, including

32

investigator data use agreements and by honest brokers who produce data sets based

33

34

on institutional review board approved protocols. Additionally, PCORnet and OMOP

35

access tools (SAS and Atlas) are restricted to the standard CDM tables with limited

36

identifying information.

37

38

39

To test the feasibility of this architecture, we converted the Medical University of South

40

Carolina research data warehouse (RDW) and operational production of PCORnet and

41 42

OMOP CDMs for MUSC to use a novel process based on this concept model. Specific

43

versions details of this implementation: FHIR version is 3.0.2; OMOP CDM version is

44

currently 5.3.1; and the PCORnet CDM is version 6.0. The database for data

45 46

management operations and for PCORnet queries is Oracle 19.6.0. Oracle tools are

47

used for maintenance and data manipulation. The Smile CDR also uses Oracle to

48

persist the data but it is not limited to this platform. At MUSC analytic operations for

49 50

OMOP transform and persist reference data sets using SQL Server 2019. The FHIR

51

CDR is assessed remotely via virtual private network linkages to the HSSC’s data

52

center at Clemson University. SAS, used to run the PopMedNet queries, is version 9.4.

53

54

55

56

57

58

59

60

https://mc.manuscriptcentral.com/jamia

Page 7 of 25

Journal of the American Medical Informatics Association

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

The transformation process and maintenance pipeline was based upon the export of a

4 5

series of flat pipe-delimited files that were loaded into the FHIR CDR but supports many

6

options for importing EHR data, including HL7 FHIR transactions and HL7 v2.x

7

transactions. In this instance, large export files were then processed to instantiate the

8 9

repository with pre-existing data. An incremental updating approach based on extracting

10

new data into a flat-file from the RDW was also developed. This incremental update is

11

extracted daily, and loaded into the FHIR repository. The FHIR repository and “live”

12 13

CDMs are updated incrementally. In FHIR, any changes from the previously persisted

14

data are recorded as new versions of the resources. OMOP and PCORnet "live"

15

versions of the databases only store the most recent value. Restoration of data

16 17

elements in the FHIR database automatically results in updating of the other two CDMs

18

via the subscription mechanism. The staging and production OMOP and PCORnet

19

instances for release are rebuilt de novo for quarterly releases. The environments for

20 21

FHIR, OMOP, and PCORnet require about 2, 0.5 and 0.4 terabytes respectively.

22

23

Composite time for database production including the application of post-processing

24 25

steps in the pipeline was observed. For the OMOP instance, data quality measures

26

were computed using both the in-house reports and OHDSI Achilles v1.6.7 and DQD

27

v1.0(develop) tools. For the PCORnet instance, standardized database quality

28

assessment routines were computed and applied. Results of prior assessments of data

29

30

quality for PCORnet certification were compared to this new approach for the

31

generation of the database.

32

33

34

The iterative data quality assessment cycles resulted in numerous improvements, that

35

were mostly implemented as post-processing steps with the expectation that they will be

36

pushed upstream into the main pipeline if they are not constrained by the transactional

37

38

nature of the data. For instance, the mappings to the expected terminologies were

39

gradually improved in terms of completeness and correctness and then could be applied

40

at any stage. In contrast, the data clean up steps that remove data of insufficient quality

41 42

were limited to the analytic production instances only since future data updates to the

43

"live" instances might improve the data quality and thus save these bits of information.

44

45 46

Work on and participation in the HSSC data warehouse program is conducted under

47

IRB PRO0009273.

48

49

50

51

52

53

54

55

56

57

58

59

60

https://mc.manuscriptcentral.com/jamia

Journal of the American Medical Informatics Association

Page 8 of 25

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17

18

19

20

21

22

23

24

25

26

27

28

29

30

31

32

33

34

35

36

37

38

39

40

41

42

43

44

45

46

47

48

49

50

51

52

53

54

55

56

57

58

59

60

https://mc.manuscriptcentral.com/jamia

Page 9 of 25

Journal of the American Medical Informatics Association

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

4 5

Results

6

7

Figure 2 shows the time delays with different approaches to capture of “raw” EHR data.

8 9

Flat file exports result in delays of days while data accumulate for export at each stage.

10

Export from our Epic EHR to Epic’s Clarity database occurs nightly. Data are extracted

11

from this database daily and stored in a linked clinical model based on EHR data model

12 13

with minimal transformation, and then exported as flat files for conversion to FHIR.

14

There are other available approaches such as HL7 v2.x or FHIR data streams for other

15

contributing data partners. Early data products support (blue shading in the figure) trial

16 17

feasibility studies (counts); final products meet network quality requirements and

18

support longitudinal analyses. Processing for conversion to FHIR, PCORnet and OMOP

19

occurs at HSSC’s Clemson database facility designed to support multiple institutions,

20 21

each with their own segmented, but linked, FHIR infrastructure.

22

23

Table 1 shows the main administrative and clinical data domains implemented in the F-

24 25

on-F architecture, applied to the MUSC data for the period from 2014-07-01 to 2020-12-

26

31. The results reveal two primary findings. First, the data entry location indicates how

27

the data are represented in each layer. In most cases, there is a 1:1 correspondence

28

between the CDMs, but certain domains are not straightforward. For instance, the vital

29

30

signs and the lab results are separate domains but exist as common Observation

31

resources in FHIR, stored in both the Measurement and Observation tables in OMOP,

32

and in the individual tables only in PCORnet.

33

34

35

Table 1. Comparison of Source RDW, FHIR, OMOP and PCORnet CDMs for MUSC

36

37

Source

FHIR

OMOP

PCORnet

38 39

Domain Count Resource Count

Table

Count Table

Count

40

Demo-

41

Patient

1,078,964 Patient

1,063,886 Person

1,059,009 graphic

1,063,891

42

Visit

43 44

Visit

10,746,491 Encounter 10,636,834 Occurrence 10,628,243 Encounter 10,636,928

45

Condition

46

Diagnosis 18,402,862 Condition

17,593,910 Occurrence

14,254,546 Diagnosis 17,594,043

47

Procedure

48

Procedure 23,029,835 Procedure 22,246,999 Occurrence 16,838,402 Procedures 22,247,280

49

MedicationR

Drug

50

MedOrder 37,948,002 equest

32,693,681 Exposure

31,829,609 Prescribing 32,703,095

51 52 53

Medication Administra-

Drug

54

MedAdmin 84,450,696 tion

43,577,863 Exposure

39,562,252 Med-Admin 39,574,769

55

Measurement +

56

Vital

16,917,012 Observation 16,127,660 Observation 16,128,048 Vital

16,127,920

57

58

59

60

https://mc.manuscriptcentral.com/jamia

Journal of the American Medical Informatics Association

Page 10 of 25

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

Measurement + 154,831,03 Lab_resul-

4

Lab

137,984,163 Observation 124,870,259 Observation

8 CM

119,992,129

5

6

7

Second, the majority of the metrics are highly consistent between all stages of the

8

pipeline. There are about 11M visits for slightly over 1M patients, associated with 18M

9 10

diagnoses and 22M procedures. The differences between the CDMs are due to several

11

factors. Most of them are common to all domains: there are certain source data entries

12

that are not processed into the pipeline; on the other hand, the OMOP and PCORnet

13 14

CDMs require certain data entries to be removed. The most dramatic differences are

15

OMOP-specific due to the domain assignments (e.g. a diagnosis code might be

16

classified as an observation concept) and one-to-many mappings.

17

18

19

In addition to the main resources/tables shown on Figure 1, the F-on-F architecture

20

implementation involved other resources/tables, including linked resources based on

21 22

the relational model (e.g. FHIR DiagnosticReports), extensions to capture the data

23

elements not covered by the standard specifications, and mapping-related supporting

24

elements (e.g. FHIR ConceptMaps). The specific examples of FHIR to OMOP mapping

25 26

are illustrated in Supplemental Table S1.

27

28

With regard to specifics of data quality, the OHDSI DQD had 3312 data quality checks,

29

including conformance and plausibility tests, and the OMOP instance passed 3092

30

31

(93%). Some of the failed checks were due to DQD technical errors (submitted on

32

github). Some data issues cannot be resolved without significant effort for a limited

33

impact (e.g. medication mapping is still somewhat incomplete, with an additional 20K+

34

35

codes needed for comprehensive coverage for the last five percent by volume of

36

medication prescriptions and administrations). The PCORnet data quality was verified

37

after each quarterly refresh by executing the Empirical Data Check (EDC) SAS package

38

39

was provided by the PCORnet Distributed Research Network Operations Center. There

40

were 1450 data checks validating that all data elements were populated as expected,

41

column lengths were correct, mappings conformed to the specification, relationships

42 43

were logical, referential integrity was respected and more. Our PCORnet instance

44

passed 1424 (98%) of those checks. An extended metrics report (generated by the

45

custom SQL) is provided in the Supplementary Table S2.

46

47

48

Initial loading of the backlog of 5-years of EHR data into the FHIR instance required

49

several weeks. However, once loaded, the approach resulted in significant

50 51

improvements in the time required to produce quarterly updates of the PCORnet

52

instance and improved the concurrency of data in refreshes. As shown in Figure 3,

53

preparation time was far less. Significant work was still required in post-processing but

54 55

now could be focused on data quality.

56

57

58

59

60

https://mc.manuscriptcentral.com/jamia

Page 11 of 25

Journal of the American Medical Informatics Association

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

Discussion

4

5

6

The sustainability of research networks for COVID-19 and emerging disorders is an

7

important issue. Costs arise in part due to custom data modeling, ETL tasks, and

8 9

repetitive data integration tasks required for operations. Further, research infrastructure

10

has to be replicated at each site, requiring significant additional investments. A unique

11

feature of the design is that rather than rely upon the FHIR representation as to the

12 13

means for query and retrieval of data, the architecture uses FHIR subscriptions to

14

trigger continuous transformations to other common data models that are maintained in

15

synchrony. This approach also allows the selection of data for specific subsets of

16 17

patients. Linked databases are available for a query with minimal time lag behind the

18

data source for queries for counts and other simple operations. When an analytical-

19

grade quality of the instance is required, the post-processing can be applied on-demand

20 21

to produce analytical data sets.

22

23

The primary innovations in this work are the use of FHIR as an initial canonical data

24 25

model and FHIR subscription protocols for the transformation and synchronization of

26

multiple data models. In future work, we will explore the use of subscription models to

27

distribute data across networks and to maintain shared data elements, such as mortality

28

status and social determinants of health data. We will also explore the use of this

29

30

approach to federate clinical data across sites by maintaining a single master patient

31

identifier and consistent supporting demographic information.

32

33

34

Prior approaches to the problem of maintenance of multiple linked data models in a data

35

repository have focused on other canonical models and automation of data both

36

transformation for queries and production of data sets. For example, work from the i2b2

37

38

group at Harvard has used the i2b2 data format as the canonical representation to

39

support dynamic ETL from that format to the OMOP and to FHIR [19]. Ong and co-

40

authors use the OMOP model as their canonical representation of data and support

41 42

dynamic queries mapped from the PCORnet CDM [20]. Choi and colleagues [21] have

43

developed automated mapping functions from OMOP to FHIR for computation.

44

45 46

There is also prior work with the use of FHIR as a meta map for ETL operations

47

between clinical data models. Pfaff and coauthors [22] describe the use of CampFHIR,

48

a tool for guiding ETL for conversions of different models. FHIR concept representation

49 50

aids and speeds a largely manual ETL process. This approach guides current N3C

51

efforts [2]. The F-on-F approach described herein was developed contemporaneously

52

with CampFHIR [17] with both efforts benefiting from collaborations. F-on-F differs in

53 54

that it is focused on ongoing data production through automated maintenance of parallel

55

CDM instances. Data transformations are implemented in Java code and executed in

56

57

58

59

60

https://mc.manuscriptcentral.com/jamia

Journal of the American Medical Informatics Association

Page 12 of 25

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

near real time. The FHIR CDR servers also provide reference storage and master data

4 5

management of EHR data and a live canonical representation of the data. The

6

approach may allow us to better understand what is lost in translation.

7

8 9

F-on-F combines near real time data transformations with post-processing for

10

production release databases. We envision the scope of real time processing as being

11

pragmatic, scaled to use cases intended. For example, if a site wanted to run OMOP

12 13

models for prediction of sepsis from clinical data, then real time processing might need

14

to be expanded to meet those needs.

15

16 17

The use of FHIR as a data source from EHRs is important from a policy perspective as

18

Information Blocking Statutes stemming from the 21st Century Cures Act specify a range

19

of clinical data to be available from EHRs for downloading and data exchange (the

20 21

USCDI) [11]. They further require that EHRs respond to queries for USCDI elements in

22

the FHIR standard both at an individual patient query level and population level starting

23

in December of 2022. Providers who cannot offer data access in this format may be

24 25

subject to fines for “information blocking”. EHR vendors must offer these capabilities to

26

maintain certification of their systems as compliant with Meaningful Use regulations. As

27

a result, many barriers for data production for research and safety will be overcome if

28

the starting point for data transformation operations for computational models is the

29

30

FHIR standard.

31

32

The broad future availability of data in the FHIR standard raises the question of whether

33

34

other analytically oriented models are necessary. OMOP and PCORnet are highly

35

evolved models refined for their purpose [23]. As analytical models, they are optimized

36

for efficient and unbiased analysis of large volumes of longitudinal normalized data. The

37

38

FHIR model is an object-oriented data model, focused on the accurate expression of

39

clinical events, not computation. F-on-F envisions a best of both worlds approach, with

40

flexible representation and optimized computation.

41

42

43

Limitations

44

45 46

The above approach is standards-based but leverages proprietary extensions of the

47

FHIR subscription specification. As discussed above, there are inherent limitations in

48

the speed with which clinical data can be integrated into any analytic model such as

49 50

OMOP or PCORnet. For example, orders or laboratory data cannot be linked to an

51

encounter that does not (yet) exist. The use of the persistence module for the

52

transformation of data is novel and computationally efficient but implements rules in

53 54

compiled Java code, where changes may be more difficult. Ultimately, some manual

55

56

57

58

59

60

https://mc.manuscriptcentral.com/jamia

Page 13 of 25

Journal of the American Medical Informatics Association

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

ETL was still deemed optimal in the production pipeline; however, future work may

4 5

reduce these requirements.

6

7

Summary

8

9

10

The use of FHIR standard as a canonical representation of clinical data with the

11

subsequent dynamic transformation to other research CDMs for analytics is a practical

12 13

approach to accelerate the availability of data for research and may be particularly

14

useful for evolving diseases such as COVID-19. While it is theoretically possible to fully

15

automate transformation to near real-time versions of OMOP or PCORnet databases, it

16 17

is more practical given the evolving nature of data to take a staged approach for models

18

for longitudinal data analysis applications.

19

20 21

Acknowledgments

22

23

Funding: This project was supported by grants to Health Sciences South Carolina from

24 25

the Duke Endowment and by the National Center for Advancing Translational Sciences

26

of the National Institutes of Health under Grant Number UL1 TR001450.

27

28

Competing Interests: Dr. Lenert, Dr. Ilatovskiy, Ms. Rudsill, Mr. Jacob, and Mr. Deans

29

30

have no competing interests Mr. Agnew and Mr. Weatherston have financial interests in

31

Smile CDR and are employed by the company

32

33

34

Contributorship: Dr. Lenert designed the study, helped obtain funding, and wrote major

35

parts of the manuscript. Dr. Illatovsky, Ms. Rudsill, and Mr. Jacobs contributed to the

36

conduct of the study and the writing of the manuscript. Mr. Deans helped obtain funding

37

38

for the study and contributed to the writing of the manuscript. Mr. Agnew and Mr.

39

Weatherston contributed to the design, the conduct of the study, and to the writing of

40

the manuscript.

41

42

43

Data availability: The data underlying this article will be shared on reasonable request to

44

the corresponding author.

45

46

47

References

48

49

50 51 52

1 Piller C. Disgraced COVID-19 studies are still routinely cited. Science 2021;371:331–2.

53 54

2 Haendel MA, Chute CG, Gersing K. The National COVID Cohort Collaborative

55

(N3C): Rationale, Design, Infrastructure, and Deployment. Journal of the American

56

Medical Informatics Association. 2020. doi:10.1093/jamia/ocaa196

57

58

59

60

https://mc.manuscriptcentral.com/jamia

Journal of the American Medical Informatics Association

Page 14 of 25

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

3 Visweswaran S, Becich MJ, D’Itri VS, et al. Accrual to Clinical Trials (ACT): A

4 5 6

Clinical and Translational Science Award Consortium Network. JAMIA Open 2018;1:147–52.

7

8

4 Hripcsak G, Duke JD, Shah NH, et al. Observational Health Data Sciences and

9

Informatics (OHDSI): Opportunities for Observational Researchers. Stud Health

10

Technol Inform 2015;216:574–8.

11

12

5 Block JP, Marsolo KA, Nagavedu K, et al. Characteristics of 24,516 patients

13

diagnosed with COVID-19 illness in a national clinical research network: Results

14

from PCORnet®. bioRxiv. 2020. doi:10.1101/2020.08.01.20163733

15

16

6 PCORnet: Progress, Challenges, and Opportunities Ahead.

17 18

2015.https://www.pcori.org/blog/pcornet-progress-challenges-and-opportunities-

19

ahead (accessed 24 Nov 2019).

20

21

7 TriNetX Readies its Real-World Data Platform and Global Network of Healthcare

22

Organizations to Support COVID-19 Clinical Research.

23

2020.https://trinetx.com/covid-19/ (accessed 31 Jan 2021).

24

25

8 Taquet M, Luciano S, Geddes JR, et al. Bidirectional associations between COVID-

26

19 and psychiatric disorder: retrospective cohort studies of 62 354 COVID-19 cases

27

in the USA. Lancet Psychiatry 2021;8:130–40.

28

29 30 31

9 FDA Sentinel System’s Coronavirus (COVID-19) Activities. 2020.https://www.sentinelinitiative.org/assessments/coronavirus-covid-19

32

(accessed 31 Jan 2021).

33

34

10 Brat GA, Weber GM, Gehlenborg N, et al. International electronic health record-

35

derived COVID-19 clinical course profiles: the 4CE consortium. npj Digital Medicine

36

2020;3:109.

37

38

11 Mandl KD, Gottlieb D, Mandel JC, et al. Push Button Population Health: The

39

SMART/HL7 FHIR Bulk Data Access Application Programming Interface. NPJ Digit

40 41

Med 2020;3:151.

42 43

12 U.S. Core Data for Interoperability (USCDI) | Interoperability Standards Advisory

44

(ISA). https://www.healthit.gov/isa/us-core-data-interoperability-uscdi (accessed 24

45

Nov 2019).

46

47

13 Braunstein ML. SMART on FHIR. Health Informatics on FHIR: How HL7’s New API

48

is Transforming Healthcare. 2018;:205–25. doi:10.1007/978-3-319-93414-3_10

49

50

14 Braunstein ML. FHIR. In: Braunstein ML, ed. Health Informatics on FHIR: How

51

HL7’s New API is Transforming Healthcare. Cham: : Springer International

52 53

Publishing 2018. 179–203.

54 55

15 Azure API for FHIR. https://azure.microsoft.com/en-us/services/azure-api-for-fhir/

56

(accessed 14 Feb 2021).

57

58

59

60

https://mc.manuscriptcentral.com/jamia

Page 15 of 25

Journal of the American Medical Informatics Association

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

16 Subscription - FHIR v4.0.1. https://www.hl7.org/fhir/subscription.html (accessed 24

4 5

Nov 2019).

6 7

17 Health Sciences South Carolina lights up a FHIR-based clinical data repository.

8

2018.https://www.healthcareitnews.com/news/health-sciences-south-carolina-lights-

9

fhir-based-clinical-data-repository (accessed 30 Jan 2021).

10

11

18 Mandel JC, Kreda DA, Mandl KD, et al. SMART on FHIR: a standards-based,

12

interoperable apps platform for electronic health records. J Am Med Inform Assoc

13

2016;23:899–908.

14

15

19 Klann JG, Phillips LC, Herrick C, et al. Web services for data warehouses: OMOP

16

and PCORnet on i2b2. J Am Med Inform Assoc 2018;25:1331–8.

17

18 19 20

20 Ong TC, Kahn MG, Kwan BM, et al. Dynamic-ETL: a hybrid approach for health data extraction, transformation and loading. BMC Med Inform Decis Mak

21

2017;17:134.

22

23

21 Choi M, Starr R, Duke J. OMOP on FHIR as an Enabler for Analytics-As-A-Service.

24

In: AMIA. 2017.

25

26

22 Pfaff ER, Champion J, Bradford RL, et al. Fast Healthcare Interoperability

27

Resources (FHIR) as a Meta Model to Integrate Common Data Models:

28

Development of a Tool and Quantitative Validation Study. JMIR Med Inform

29 30

2019;7:e15199.

31 32

23 Weeks J, Pardee R. Learning to Share Health Care Data: A Brief Timeline of

33

Influential Common Data Models and Distributed Health Data Networks in U.S.

34

Health Care Research. EGEMS (Wash DC) 2019;7:4.

35

36

37

38

39

40

41

42

43

44

45

46

47

48

49

50

51

52

53

54

55

56

57

58

59

60

https://mc.manuscriptcentral.com/jamia

Journal of the American Medical Informatics Association

Page 16 of 25

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

Figure Legends

4

5

6

Figure 1. Adapting a FHIR CDR for real-time ETL to OMOP and PCORnet CDMs.

7

8 9

Figure 2. Computational pipeline for simultaneous multi-CDM production. Shaded boxes

10

show technically available computational products. Approximate delays (relative to the

11

previous step) are shown in the bottom.

12

13

14

Figure 3. Production timelines for PCORnet database release

15

16

17

18

19

20

21

22

23

24

25

26

27

28

29

30

31

32

33

34

35

36

37

38

39

40

41

42

43

44

45

46

47

48

49

50

51

52

53

54

55

56

57

58

59

60

https://mc.manuscriptcentral.com/jamia

Page 17 of 25
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60

Journal of the American Medical Informatics Association
Figure 1. Adapting a FHIR CDR for real-time ETL to OMOP and PCORnet CDMs.
https://mc.manuscriptcentral.com/jamia

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

Journal of the American Medical Informatics Association

Page 18 of 25

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17

18

19

20

21

22

23

24

25

Figure 2. Computational pipeline for simultaneous multi-CDM production. Shaded boxes show technically

26

available computational products. Approximate delays (relative to the previous step) are shown in the

27

bottom.

28

29

30

31

32

33

34

35

36

37

38

39

40

41

42

43

44

45

46

47

48

49

50

51

52

53

54

55

56

57

58

59

60

https://mc.manuscriptcentral.com/jamia

Page 19 of 25
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60

Journal of the American Medical Informatics Association
Figure 3. Production timelines for PCORnet database release
https://mc.manuscriptcentral.com/jamia

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

Journal of the American Medical Informatics Association

Page 20 of 25

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

FHIR STU3

OMOP CDM v5.3.1

OMOP HSSC extensions

2

Patient (standard)

Patient (extensions)

Person

Death

Location

HSSC_Person

HSSC_Death

HSSC_Location

3

id

4 birthDate
5

6

7

gender

8

9

race

10

11

ethnicity

12 13 14 15 16 17 18 19

identifier.system[identifier.type.coding. code == "MR"] identifier.value[identifier.type.coding. code == "MR"] identifier.value[identifier.system == "http://hl7.org/fhir/sid/us-ssn"] identifier.value[identifier.system == "EMPI"] active
name.family
name.given[0]
name.given[1]
name.prefix

person_id year_of_birth month_of_birth day_of_birth birth_datetime gender_source_value gender_source_concept_id gender_concept_id race_source_value race_source_concept_id race_concept_id ethnicity_source_value ethnicity_source_concept_id ethnicity_concept_id

person_id

person_id

person_id

gender_source_system
race_source_system
ethnicity_source_system
med_rec_num_system med_rec_num social_security_number empi_id status_source_value last_name first_name middle_name prefix_name

20 21 22

name.suffix
telecom.value[telecom.system == "phone" && telecom.use == "home"]
telecom.value[telecom.system == "phone" && telecom.use == "mobile"]

23

telecom.value[telecom.system == "phone" && telecom.use == "work"]

24

telecom.value[telecom.system == "email"]

25

maritalStatus

26

generalPractitioner

27

communication.language

28 militaryStatus
29

30

religion

31

managingOrganization

32

deceasedBoolean

33

34

deceasedDateTime

35

causeOfDeath

36

37

deceasedSource

address

38

address.line[1]

39

address.line[2]

address.city

40

address.district

41

address.state

address.postalCode

42

address.country

43

address.use address.type

44

deathDatePrecision

location_id

death_date death_datetime
death_date death_datetime cause_source_value
location_id address_1 address_2 city county state zip

suffix_name home_phone mobile_phone work_phone email marital_status_source_value marital_status_source_system pcp_provider_id language_source_value language_source_system military_status_source_value military_status_source_system religion_source_value religion_source_system source_care_site_id
deceased_flag
cause_source_system cause_source_display death_date_precision source_of_value
location_id
country_source_value location_use location_type

45

46

47

48

49

50

51

52

53

54

55

56

57

58

59

60

https://mc.manuscriptcentral.com/jamia

Page 21 of 25

1

2

7/1/2014- 12/31/2020

3

4

Domain

Measurement

5

6

7

8

9

10

11

12

13

14

15

16

17

18

19

20

Demographic

Total

21

22

Age group: 0-4 years

23

24

Age group: 5-14 years

25

Age group: 15-21 years

26

Age group: 22-64 years

27

28

Age group: 65+ years

29

30

Age group: missing

31

32

33

Ethnicity: Hispanic

34

Ethnicity: Not Hispanic

35

36

Ethnicity: Missing

37

38

Sex: Female

39

40

Sex: Male

41

Sex: Missing OR Other

42

43

44

45

46

47

Journal of the American Medical Informatics Association

Source

Count

%

FHIR

Count

%

1,078,964

1,063,886

PCORnet

Count

%

1,063,891

OMOP

Count

%

1,059,009

Comments
Source: calculated based on the encounter admit date. FHIR: calculated based on the encounter admit date; includes stubs. OMOP: Patients are removed when they have no encounters in the valid date range or have no DOB (includes stubs). PCORnet: Patients are removed when they have no encounters in the

59,686 130,508
91,657 542,996 254,068

5.5% 12.1%
8.5% 50.3% 23.5%

46 0.0%

58,631 129,159
89,765 529,395 249,614
7,321

5.5% 12.1%
8.4% 49.8% 23.5%

58,368 129,267
89,638 529,968 248,100

5.5% 12.2%
8.4% 49.8% 23.3%

0.7%

8,550 0.8%

58,599 129,192
89,829 530,472 250,917
0

5.5% 12.2% the index date: death
8.5% date if any or 1/1/2021, 50.1% whichever is first 23.7%
OMOP: patients without 0.0% DOB are deleted

38,055 938,418 102,491

3.5% 87.0%
9.5%

37,620 925,297 100,969

3.5% 87.0%
9.5%

37,529 924,083 102,279

3.5% 86.9%
9.6%

37,632 927,188
94,189

3.6% 87.6%
8.9%

592,313 484,836
1,815

54.9% 44.9%
0.2%

580,722 474,139
1,714

54.6% 44.6%
0.2%

580,083 473,529
10,279

54.5% 44.5%
1.0%

581,814 475,431
1,764

54.9% 44.9%
0.2%

https://mc.manuscriptcentral.com/jamia

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17 18

Death

19

20

21

22

23

24

Address History

25

26

27 28

Vital

29

30

31

32

33

34

35

36

37

38

39

40

41

42

43

44

45

46

47

Journal of the American Medical Informatics Association

Page 22 of 25

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

Race: American Indian or Alaska Native Race: Asian
Race: Black or African American
Race: Native Hawaiian or Other Pacific Islander Race: White Race: Other Race: Unknown Race: Patient Refused

1,459 9,276

0.1% 0.9%

305,540 28.3%

890 641,421
66,275 38,853
2,550

0.1% 59.4%
6.1% 3.6% 0.2%

1,437 9,118
300,660
875 631,810
64,125 36,380
2,440

TDoetatlh data from hospital / dDeeaatthhddaattea from hospital / death flag Death data from state
Total (patients with US aPdadtireenstssdwatitah)out Address History
Total records for Height, Weight and Smoking status

27,521 25,639
1,882 0
1,073,928 5,036
16,917,012

2.6% 2.4% 0.2% 0.0%

27,441 25,533
1,908 0

99.5% 1,056,691

0.5%

7,195

16,127,660

0.1% 0.9%

1,416 9,089

0.1% 0.8%

1,418 9,106

0.1% 0.9%

28.3% 300,297 27.8%

301,644 28.5%

0.1% 59.4%
6.0% 3.4% 0.2%

873 630,996
64,004 54,759
2,457

0.1% 58.5%
5.9% 5.1% 0.2%

2.6% 2.4% 0.2% 0.0%

57,139 25,041
1,878 50,589

5.3% 2.3% 0.2% 4.7%

99.3% 1,055,001 99.2%

0.7%

8,890 0.8%

874 633,007
28,318 25,543
2,775 0
1,055,556 3,453

0.1%
59.8% OMOP: not represented iOnMstOaPn:dnaordt rveopcraebseunlatreides iOnMstOaPn:dnaordt rveopcraebseunlatreides in standard vocabularies
OMOP: some deaths are 2.7% cleaned up. PCORnet: 2.4% OMOP: HSSC extension 0.3% OMOP: HSSC extension 0.0% only loaded in PCORnet
OMOP: no history in CDM 99.7% vO5MOP: non-US is
0.3% removed since cannot be

16,127,920

16,128,048

Height: total records Height: mean Height: median Patients with Height Vital

3,693,984 62 65
707,019

65.5%

3,659,567 62 65
689,090

64.8%

3,659,656 62 65
689,094

64.8%

3,659,527 62 65
689,001

in in 65.1%

Weight: Total Records Weight: Mean Weight: Median Patients with Weight Vital

5,824,820 157 164
773,257

71.7%

5,859,912 157 164
753,754

70.8%

5,860,024 157 164
753,755

70.8%

5,860,476 157 164
753,650

lb lb 71.2%

Smoking status: total records 7,398,208

6,608,181

6,608,240

https://mc.manuscriptcentral.com/jamia

6,608,045

Page 23 of 25

1

2

3

4

5

6

7

8

9

Encounter

10

11

12

13

14

15

16

17

18

19

20

21

22

23

24

25

26

27

Diagnosis

28

29

30

31

32

33

34

35

36

37

38

39

40

41

42

43

44

45

46

47

Journal of the American Medical Informatics Association

Smoking status: Current Everyday Smoking status: Former Smoking status: NAlelvoetrher sPmatoieknintsgwstiatthuSsmesoking Status (including status NI)

127,510 161,100 571,414 148,144 885,857

11.8% 14.9% 53.0% 13.7% 82.1%

92,279 153,670 549,732 141,381 835,815

Total Patients with Encounters Encounters per Patient

10,746,491 1,079,094 9.96

10,636,834 100.0% 1,063,886
10.00

Encounter Type: Ambulatory Encounter Type: Emergency Encounter Type: Inpatient Encounter Type: Missing

9,899,185 543,478 303,828 0

92.1% 5.1% 2.8% 0.0%

9,789,238 535,972 301,706 9,918

DEnisctoinucnttPersowviidtehrMs issing Provider

35,916 17,554

0.2%

20,120 70,583

Encounters with Clinical data 10,340,028 96.2% 10,164,847

Total Patients with Diagnoses Patients without Diagnoses Diagnoses per Patient

18,402,862 822,026 229,570 17.06

76.2% 21.3%

17,593,910 782,614 281,272 16.5

Code: ICD-10 Code: ICD-09

15,770,936 85.7% 14,987,411 2,631,926 14.3% 2,606,499

Principal DX: yes Principal DX: no Principal DX: missing

5,743,251 12,671,248
0

31.2% 5,395,330

68.9% 12,198,580

0.0%

0

DX present of arrival: yes

2,673,399 14.5% 2,604,915

8.7% 14.4% 51.7% 13.3% 78.6%

92,280 153,670 549,735
36,729 862,750

8.7% 14.4% 51.7%
3.5% 81.1%

92,265 153,652 549,690 141,333 835,705

8.7% 14.5% Patients can contribute 51.9% to more than one 13.3% category. 78.9%

10,636,928 100.0% 1,063,891 100.0%
9.92

10,628,243 1,055,314 10.04

FHIR: includes stubs. 99.7%

92.0% 5.0% 2.8% 0.1%

9,789,329 535,976 301,705 9,918

92.0% 5.0% 2.8% 0.1%

9,781,035 535,842 301,504 9,862

92.0% 5.0% 2.8% 0.1%

0.7%

12,623 42,331

0.4%

12,604 70,166

0.7%

95.6% 10,167,576

73.6% 26.4%

17,594,043 782,622 281,269 16.5

85.2% 14,987,544 14.8% 2,606,499

95.6%
73.6% 26.4%
85.2% 14.8%

10,143,916
14,254,546 727,589 331,434 13.5
12,179,407 2,067,484

95.4%
OMOP: cOoMnOdiPt:ion_occurrence 68.7% cOoMnOdiPt:ion_occurrence 31.3% cOoMnOdiPt:ion_occurrence condition_occurrence
OMOP: 85.4% cOoMnOdiPt:ion_source_conce 14.5% condition_source_conce

30.7% 940,657 69.3% 5,251,737
0.0% 11,401,649

5.3% 29.8% 64.8%

155,275 295,316 13,803,955

1.1% OMOP: HSSC extension 2.1% OMOP: HSSC extension 96.8% OMOP: HSSC extension

14.8% 2,604,940 14.8% 2,648,793 18.6% OMOP: HSSC extension

https://mc.manuscriptcentral.com/jamia

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

1

2

3

E in RDW

4

5

6

7

8

9

10

11

Procedure

12

13

14

15

16

17

18

19

20

21

22

23

24

25

26

27

28

29

Lab

30

31

32

33

34

35

36

37

Med Orders

38

39

40

41

42

43

44

45

46

47

Journal of the American Medical Informatics Association

Page 24 of 25

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

DX present of arrival: no

364,145

DX present of arrival: Omtihsseirng

868,129

(No information or Unknown) 14,497,189

2.0% 1,201,539

4.7%

0

78.8% 13,787,456

Distinct Providers Missing Provider

0

0

18,402,862 100.0% 17,593,910

Total Patients with Procedures Patients without Procedures Procedures per Patient

23,029,835 906,448 174,134 21.3

84.0% 16.1%

22,246,999 896,231 167,655 20.9

Encounters with Procedures 8,666,204 80.6% 8,602,766

Code: ICD-09 Code: ICD-10 Code: CH Code: Other

177,766 448,457 22,421,619
0

0.8% 1.9% 97.4% 0.0%

154,236 432,168 21,047,534 613,061

Distinct Providers Missing Provider

7,352 79

0.0%

7,349 16

Total Patients with labs Distinct LOINC codes Mapped to LOINC code

137,984,163 692,459 3,365
93,552,391

124,870,259

64.2% 627,743

0

67.8%

0

Total Patients with MedOrders
Mapped to RxNorm Distinct RxNorm codes

37,948,002

32,693,681

823,961 76.4% 778,504

33,578,829 88.5%

0

2,240

0

6.8% 1,201,561

0.0%

0

78.4% 13,787,542

100.0%

8,710 15,223

84.2% 15.8%

22,247,280 896,234 167,657 21

80.9% 8,602,836

0.7% 1.9% 94.6% 2.8%

154,236 432,176 21,105,533 555,335

0.0%

7,349 15

119,992,129 59.0% 627,327
2,477 0.0% 115,116,446

6.8% 0.0% 78.4%
0.1%
84.2% 15.8%
0.7% 1.9% 94.9% 2.5%
0.0%
59.0% 95.9%

537,275 0
11,068,478
0 14,254,546
16,838,402 894,212 164,797 15.9
8,205,810
72,573 431,371 15,426,992 907,466
7,118 187,864
154,831,038 756,467 2,491
113,805,533

3.8% OMOP: HSSC extension 0.0% FHIR: treated as 'N'. 77.6% OMOP: HSSC extension
Source: providers not aSsosuorcciea:tepdrowvitdhers not 100.0% associated with
OMOP: pOrMocOePd:ure_occurrence 84.4% pOrMocOePd:ure_occurrence 15.6% pOrMocOePd:ure_occurrence procedure_occurrence
OMOP: 77.2% procedure_occurrence
OMOP: mapped to OMOP0.4% sOtManOdPa:rmd IaCpDp9ePdrtoocOMOP2.6% sOtManOdPa:rmd IaCpDp1e0dPtCoSOMOP91.6% sOtManOdPa:radllHoCtPhCeSrsa,nd CPT4 5.4% including ones from the
OMOP: pOrMocOePd:ure_occurrence 1.1% procedure_occurrence
FHIR: certain lab types aOnMdOlaPb: lraebsuolrtdsearse+filatbered 71.4% rFeHsIuRl:tns ofrtomapped to LFOHIRN:Cn. oOtMmOaPp:pleadb toorders 73.5% LOINC. OMOP: lab orders

32,703,095 73.2% 778,250
0.0% 31,101,640 6,197

73.2% 95.1%

31,829,609 777,920
26,256,778 4,783

OMOP: medication oOrMdeOrPs:ams perdoicvaidtieodnin the 73.5% orders as provided in the
FHIR: not mapped to 82.5% RFHxNIRo:rnmo.tOmMapOpPe:d to
RxNorm. OMOP:

https://mc.manuscriptcentral.com/jamia

Page 25 of 25

1

2

3

Med Admin

4

5

6

7

8

9

10

11

12

13

14

15

16

17

18

19

20

21

22

23

24

25

26

27

28

29

30

31

32

33

34

35

36

37

38

39

40

41

42

43

44

45

46

47

Journal of the American Medical Informatics Association

Total Patients with MedAdmins
Mapped to RxNorm Distinct RxNorm codes

84,450,696

43,577,863

490,185 45.4% 459,434

67,412,510 79.8%

0

1,576

0

39,574,769 43.2% 458,375 43.1%
0.0% 39,574,769 100.0% 7,866

39,562,252 458,268
34,138,226 2,334

FHIR: certain medAdmin sOtMatOusPe:smaeredifcilatteiroend out. 43.3% admins as provided in the
FHIR: not mapped to 86.3% RFHxNIRo:rnmo.tOmMapOpPe:d to
RxNorm. OMOP:

https://mc.manuscriptcentral.com/jamia

Downloaded from https://academic.oup.com/jamia/advance-article/doi/10.1093/jamia/ocab108/6276433 by Robert Gordon University user on 28 May 2021

